{"version":3,"file":"ng-cascading-dropdown-lib.umd.js","sources":["ng://ng-cascading-dropdown-lib/lib/ng-cascading-dropdown-lib.service.ts","ng://ng-cascading-dropdown-lib/lib/ng-cascading-dropdown-lib.component.ts","ng://ng-cascading-dropdown-lib/lib/ng-cascading-dropdown-lib.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NgCascadingDropdownLibService {\r\n\r\n  constructor() { }\r\n}\r\n","// Angular imports\r\nimport { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'ng-cascading-dropdown',\r\n  templateUrl: './ng-cascading-dropdown-lib.component.html',\r\n  styleUrls: ['./ng-cascading-dropdown-lib.component.css']\r\n})\r\nexport class NgCascadingDropdownLibComponent implements OnInit {\r\n\r\n  /**\r\n   * Page Specific Prop's\r\n   */\r\n  public dropdownData = [];\r\n  public dropdownValue = [];\r\n  public childRootData = [];\r\n  public dropDownCounter = [];\r\n\r\n  private rootData = [];\r\n  private finalSelectedElement = {};\r\n\r\n  /**\r\n   * Input Output Prop's\r\n   */\r\n  // Input Data for cascading dropdown\r\n  @Input() inputCascadingData;\r\n\r\n  // Input Data for default selection to be show per dropdown\r\n  @Input() defaultSelectionData;\r\n\r\n  // Toggle Dropdown disability\r\n  @Input() disableDropdown = false;\r\n\r\n  // Show Default Selection\r\n  @Input() showDefaultSelection = false;\r\n\r\n  // Show Horizontal dropdown or Vertical dropdown\r\n  @Input() showHorizontal = true;\r\n\r\n  // Notify the final dropdown value selected\r\n  @Output() notifyFinalDropDownValue = new EventEmitter();\r\n\r\n  // Notify all the Selected Values per dropdown\r\n  @Output() notifyDropDownValue = new EventEmitter();\r\n\r\n  // Notify if dropdown value is changed\r\n  @Output() notifyChangeEvent = new EventEmitter();\r\n\r\n  /**\r\n   * Class Constructor\r\n   */\r\n  constructor() { }\r\n\r\n\r\n  /**\r\n   * Angular Life Cycle Hook\r\n   */\r\n  ngOnInit() {\r\n    if (this.inputCascadingData) {\r\n      this.dropdownData = this.inputCascadingData;\r\n      this.processParentDropdownData();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Separate Server Dropdown Data into Parent And Child Array\r\n   * and Call Parsing Function\r\n   */\r\n\r\n  processParentDropdownData() {\r\n    this.rootData = this.processParentChildDropdownData(this.dropdownData);\r\n    this.dropDownCounter.push(Object.assign([], this.rootData));\r\n    this.dropdownValue[0] = 'default';\r\n  }\r\n\r\n  /**\r\n   * Calls Parsing function and returns Parsed Array(Parent-Child Relationship)\r\n   */\r\n\r\n  processParentChildDropdownData(data) {\r\n    const tree = this.unflattenJson(data);\r\n    return tree;\r\n  }\r\n\r\n  /**\r\n   * Converting Flat JSON to Parent-Child Tree\r\n   */\r\n\r\n  unflattenJson(data) {\r\n    const tree = [];\r\n    const mappedArr = {};\r\n    let arrElem;\r\n    let mappedElem;\r\n\r\n    for (let i = 0, len = data.length; i < len; i++) {\r\n      arrElem = data[i];\r\n      mappedArr[arrElem.id] = arrElem;\r\n      mappedArr[arrElem.id].childData = [];\r\n    }\r\n    for (const id in mappedArr) {\r\n      if (mappedArr.hasOwnProperty(id)) {\r\n        mappedElem = mappedArr[id];\r\n        if (mappedElem.parentGroupID) {\r\n          mappedArr[mappedElem.parentGroupID].childData.push(mappedElem);\r\n        } else {\r\n          tree.push(mappedElem);\r\n        }\r\n      }\r\n    }\r\n    return tree;\r\n  }\r\n\r\n\r\n  /**\r\n   * Handle Dropdown change and do conditional Checking\r\n   */\r\n\r\n  onDropdownChange(dataObj, i) {\r\n    if (dataObj !== 'default' && dataObj.childData.length > 0) { // If child elements are present\r\n      const currentLength = i;\r\n      this.dropDownCounter = [];\r\n      if (i === 0) {\r\n        this.dropdownValue = [];\r\n      }\r\n      for (let index = this.dropdownValue.length - 1; index > currentLength; index--) {\r\n        this.dropdownValue.splice(index, 1);\r\n      }\r\n      this.populateDropDownCounter(dataObj, i);\r\n      this.notifyChangeEvent.emit(false);\r\n    } else if (dataObj === 'default') { // for default condition\r\n      const currentLength = i;\r\n      this.dropdownValue[i] = 'default';\r\n      for (let index = this.dropdownValue.length - 1; index > currentLength; index--) {\r\n        this.dropdownValue.splice(index, 1);\r\n      }\r\n      for (let index = this.dropDownCounter.length - 1; index > currentLength; index--) {\r\n        this.dropDownCounter.splice(index, 1);\r\n      }\r\n      this.notifyChangeEvent.emit(false);\r\n    } else { // for final element with no child element\r\n      this.dropdownValue[i] = dataObj;\r\n      if (i === 0) {\r\n        this.dropDownCounter = [];\r\n        this.dropdownValue = [];\r\n        this.dropDownCounter[0] = Object.assign([], this.rootData);\r\n        this.dropdownValue[0] = dataObj;\r\n      } else {\r\n        this.dropDownCounter = this.dropDownCounter.slice(0, i + 1);\r\n        this.dropdownValue = this.dropdownValue.slice(0, i + 1);\r\n      }\r\n      this.finalSelectedElement = {};\r\n      this.finalSelectedElement = Object.assign({}, dataObj);\r\n      this.notifyFinalDropDownValue.emit(this.finalSelectedElement);\r\n      this.notifyDropDownValue.emit(this.dropdownValue);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Called by dropdown if child element is present\r\n   */\r\n\r\n  populateDropDownCounter(dataObj, i) {\r\n    this.dropdownValue[i] = dataObj;\r\n    this.dropDownCounter[0] = Object.assign([], this.rootData);\r\n    for (let j = 1; j < this.dropdownValue.length + 1; j++) {\r\n      this.dropDownCounter[j] = Object.assign([], this.dropdownValue[j - 1].childData);\r\n    }\r\n    this.dropdownValue[i + 1] = 'default';\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { NgCascadingDropdownLibComponent } from './ng-cascading-dropdown-lib.component';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { CommonModule } from '@angular/common';\r\n\r\n@NgModule({\r\n  declarations: [NgCascadingDropdownLibComponent],\r\n  imports: [\r\n    FormsModule,\r\n    CommonModule\r\n  ],\r\n  exports: [NgCascadingDropdownLibComponent]\r\n})\r\nexport class NgCascadingDropdownLibModule { }\r\n"],"names":["Injectable","EventEmitter","Component","Input","Output","NgModule","FormsModule","CommonModule"],"mappings":"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"}